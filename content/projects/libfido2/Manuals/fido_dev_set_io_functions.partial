<table class="head">
  <tr>
    <td class="head-ltitle">FIDO_DEV_SET_IO_FUNCTIONS(3)</td>
    <td class="head-vol">Library Functions Manual</td>
    <td class="head-rtitle">FIDO_DEV_SET_IO_FUNCTIONS(3)</td>
  </tr>
</table>
<div class="manual-text">
<h1 class="Sh" title="Sh" id="NAME"><a class="selflink" href="#NAME">NAME</a></h1>
<b class="Nm" title="Nm">fido_dev_set_io_functions</b> &#x2014;
  <span class="Nd" title="Nd">FIDO 2 device I/O interface</span>
<h1 class="Sh" title="Sh" id="SYNOPSIS"><a class="selflink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<b class="In" title="In">#include
  &lt;<a class="In" title="In">fido.h</a>&gt;</b>
<div class="Pp"></div>
<div class="Bd" style="margin-left: 0.00ex;">
<pre class="Li">
typedef void *fido_dev_io_open_t(const char *); 
typedef void  fido_dev_io_close_t(void *); 
typedef int   fido_dev_io_read_t(void *, unsigned char *, size_t, int); 
typedef int   fido_dev_io_write_t(void *, const unsigned char *, size_t); 
 
typedef struct fido_dev_io { 
	fido_dev_io_open_t  *open; 
	fido_dev_io_close_t *close; 
	fido_dev_io_read_t  *read; 
	fido_dev_io_write_t *write; 
} fido_dev_io_t;
</pre>
</div>
<br/>
<var class="Ft" title="Ft">int</var>
<br/>
<b class="Fn" title="Fn">fido_dev_set_io_functions</b>(<var class="Fa" title="Fa" style="white-space: nowrap;">fido_dev_t
  *dev</var>, <var class="Fa" title="Fa" style="white-space: nowrap;">const
  fido_dev_io_t *io</var>);
<h1 class="Sh" title="Sh" id="DESCRIPTION"><a class="selflink" href="#DESCRIPTION">DESCRIPTION</a></h1>
The <b class="Nm" title="Nm">fido_dev_set_io_functions</b> interface defines the
  I/O handlers used to talk to <var class="Fa" title="Fa">dev</var>. Its usage
  is optional. By default, <i class="Em" title="Em">libfido2</i> will use
  <i class="Em" title="Em">libhidapi</i> to talk to a FIDO device.
<div class="Pp"></div>
A <var class="Vt" title="Vt">fido_dev_io_open_t</var> function is expected to
  return a non-NULL opaque pointer on success, and NULL on error. The returned
  opaque pointer is never dereferenced by <i class="Em" title="Em">libfido2</i>.
<div class="Pp"></div>
A <var class="Vt" title="Vt">fido_dev_io_close_t</var> function receives the
  opaque handle obtained from
  <var class="Vt" title="Vt">fido_dev_io_open_t</var>. It is not expected to be
  idempotent.
<div class="Pp"></div>
A <var class="Vt" title="Vt">fido_dev_io_read_t</var> function reads from
  <var class="Fa" title="Fa">dev</var>. The first parameter taken is the opaque
  handle obtained from <var class="Vt" title="Vt">fido_dev_io_open_t</var>. The
  read buffer is pointed to by the second parameter, and the third parameter
  holds its size. Finally, the last argument passed to
  <var class="Vt" title="Vt">fido_dev_io_read_t</var> is the number of
  milliseconds the caller is willing to sleep, should the call need to block. If
  this value holds -1, <var class="Vt" title="Vt">fido_dev_io_read_t</var> may
  block indefinitely. The number of bytes read is returned. On error, -1 is
  returned.
<div class="Pp"></div>
Conversely, a <var class="Vt" title="Vt">fido_dev_io_write_t</var> function
  writes to <var class="Fa" title="Fa">dev</var>. The first parameter taken is
  the opaque handle returned by
  <var class="Vt" title="Vt">fido_dev_io_open_t</var>. The write buffer is
  pointed to by the second parameter, and the third parameter holds its size. A
  <var class="Vt" title="Vt">fido_dev_io_write_t</var> function may block. The
  number of bytes written is returned. On error, -1 is returned.
<div class="Pp"></div>
No references to <var class="Fa" title="Fa">io</var> are held by
  <b class="Fn" title="Fn">fido_dev_set_io_functions</b>().
<h1 class="Sh" title="Sh" id="RETURN_VALUES"><a class="selflink" href="#RETURN_VALUES">RETURN
  VALUES</a></h1>
On success, <b class="Fn" title="Fn">fido_dev_set_io_functions</b>() returns
  <code class="Dv" title="Dv">FIDO_OK</code>. On error, a different error code
  defined in
  <b class="In" title="In">&lt;<a class="In" title="In">fido/err.h</a>&gt;</b>
  is returned.</div>
<table class="foot">
  <tr>
    <td class="foot-date">May 25, 2018</td>
    <td class="foot-os">Linux 4.16.11-1-ARCH</td>
  </tr>
</table>
